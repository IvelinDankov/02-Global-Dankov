<section class="section section-products">
  <div class="container products-container">
    <div class="products-heading-box">
      <h2 class="heading-2 products-heading">
        Fresh Organic Supply Direct From <br />
        Farmer to Home
      </h2>
      <div class="products-filter-box">
        <form class="products-filter-box">

          <button class="search-button" type="button">

            <span><ion-icon name="search-outline"></ion-icon></span>

          </button>
          <input [(ngModel)]="searchTerm" (input)="onSearch()" type="text" name="search"
            placeholder="Search products..." />
          <div class="form-group">
            <label for="sort">Sort by</label>
            <select (change)="onSortChange($event)" #sort [(ngModel)]="selectedSort" name="sort" id="sort">
              @for (sortedItem of sortProducts; track sortedItem) {
              <option [value]="sortedItem.value"> {{sortedItem.label}} </option>
              }
            </select>
          </div>
        </form>
      </div>
    </div>


    <ul class="home-product-list">
      @if (isLoading) {
      <span class="loader"></span>
      } @else {

      @for (product of filteredProducts; track product?._id) {

      <li class="home-product-item">
        <button (click)="toggleLike(product)" class="product-like-icon" type="button">
          <span [class.isLiked]="product.isLiked"> {{product.likes.length}} </span>
          @if(product.isLiked) {
          <ion-icon name="heart"></ion-icon>
          <sup class="liked">Liked</sup>
          } @else {
          <ion-icon name="heart-outline"></ion-icon>
          <sup class="like">like. </sup> }

        </button>
        <img src="{{product.imageUrl}}" alt="{{product.name}}" class="home-product-image" />
        <button class="product-button">
          <ion-icon name="cart-outline"></ion-icon>
        </button>
        <div class="home-product-content">
          <p class="product-title">{{product.name}} {{product.weight}}gm</p>
          <p appPrice class="product-price">{{product.price | currency: 'EUR'}}</p>
          <a [routerLink]="['/products', product._id]" class="product-details">
            details &#10555;
          </a>
        </div>
      </li>
      }
      }

    </ul>
  </div>
</section>